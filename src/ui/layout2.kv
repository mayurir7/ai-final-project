#:kivy 1.10.0
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import utils kivy.utils
BoxLayout:
    ScreenManager:
        transition: FadeTransition()
        StartScreen:
            name: 'start'
        MainScreen:
            name: 'main'

<StartScreen>:
    canvas:
        Color: 
            rgb: [.1, .1,.1]
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        Label:
            text: "intelligrid"
            font_name: "Gotham"
            font_size: 40
            bold: True
        Button:
            text: "New Plan"
            font_name: "Gotham"
            font_size: 30
            on_press: root.show_load(root.load_predicter)
        Button:
            text: "Open Plan"
            font_name: "Gotham"
            font_size: 30
            on_press: root.show_load(root.load_predictions)
        
<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: root.path
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
            Button:
                text: "Load"
                on_release:
                    root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            path: root.path
            on_selection: text_input.text = self.selection and self.selection[0]

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)

<TimePicker>:
    size_hint: (None, None)
    size: 290, 140
    pos_hint: {'center_x': .5, 'center_y': .5}
    canvas:
        Color:
            rgb: utils.get_color_from_hex("#232323")
        Rectangle:
            size: 300, 150
            pos: [root.pos[0], root.pos[1]]
        Color:
            rgb: utils.get_color_from_hex("#2a2a2a")
        Rectangle:
            size: 82, 49
            pos: [root.pos[0] + 17, root.pos[1] + 49]
    HoverButton:
        id: time_selector_up
        size_hint: None, None
        size: 20, 20
        pos: [root.pos[0] + 47, root.pos[1] + 108]
        background_normal: 'images/ChevronUpHover.png' if self.hovered else 'images/ChevronUpDefault.png'
        background_down: 'images/ChevronUpDefault.png'
        on_release: root.change_hour('up')
    Label:
        size_hint: None, None
        halign: "right"
        valign: "bottom"
        color: utils.get_color_from_hex("#c0c0c0")
        font_name: "GothamB"
        font_size: 30
        size: 82, 49
        pos: [root.pos[0] + 17, root.pos[1] + 49]
        id: time_selector_time
        text: str(root.sel_hour)
    Label:
        size_hint: None, None
        halign: "left"
        valign: "bottom"
        color: utils.get_color_from_hex("#c0c0c0")
        font_name: "GothamB"
        font_size: 30
        size: 82, 49
        pos: [root.pos[0] + 67, root.pos[1] + 51]
        id: time_selector_time
        text: ':'
    Label:
        size_hint: None, None
        halign: "left"
        valign: "bottom"
        color: utils.get_color_from_hex("#c0c0c0")
        font_name: "GothamB"
        font_size: 30
        size: 82, 49
        pos: [root.pos[0] + 94, root.pos[1] + 49]
        id: time_selector_time
        text: '56'
    HoverButton:
        id: time_selector_down
        size_hint: None, None
        size: 20, 20
        pos: [root.pos[0] + 47, root.pos[1] + 18]
        background_normal: 'images/ChevronDownHover.png' if self.hovered else 'images/ChevronDownDefault.png'
        background_down: 'images/ChevronDownDefault.png'
        on_release: root.change_hour('down')
    HoverButton:
        id: time_selector_ok
        text: "OK"
        size_hint: (None, None)
        font_name: "GothamM"
        font_size: 12
        size: 80, 30
        pos: root.pos[0] + 190, root.pos[1] + 88
        background_normal: 'images/LightGrey.jpg' if self.hovered else 'images/DefaultGrey.jpg'
        background_down: 'images/LightGrey.jpg'
        on_release: root.ok_click()
    HoverButton:
        text: "Cancel"
        size_hint: (None, None)
        font_name: "GothamM"
        font_size: 12
        size: 80, 30
        pos: root.pos[0] + 190, root.pos[1] + 28
        background_normal: 'images/LightGrey.jpg' if self.hovered else 'images/DefaultGrey.jpg'
        background_down: 'images/LightGrey.jpg'
        on_release: root.dismiss()
<MainScreen>:
    canvas:
        Color: 
            rgb: utils.get_color_from_hex(root.c3)
        Rectangle:
            pos: self.pos
            size: self.size
    FloatLayout:
        #graph
        RelativeLayout:
            pos: 0, 0
            FloatLayout:
                size_hint: None, None
                size: 800, 250
                pos: 0, 0
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c3)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            RelativeLayout:
                id: test
                size_hint: None, None
                pos: 3, 3
                size: 794, 222
            Label:
                size_hint: None, None
                halign: "right"
                valign: "middle"
                text: "Energy Efficiency"
                text_size: self.size
                font_name: "Avenir3"
                font_size: 14
                height: 25
                width: 800 - 30 #padding
                pos: 0, 225
        #total report
        RelativeLayout:
            size_hint: None, None
            pos: 0, 250
            FloatLayout:
                size_hint: None, None
                size: 250, 345
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c2)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            FloatLayout:
                size_hint: None, None
                size: 250, 25
                pos: 0, 345
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c3)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Label:
                size_hint: None, None
                halign: "center"
                valign: "bottom"
                text: "Results Summary"
                text_size: self.size
                font_name: "Avenir3"
                font_size: 13
                height: 25
                width: 250
                pos: 0, 350
            RelativeLayout:
                size_hint: None, None
                pos: 5, 315
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Total Energy Needed: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 12
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_total_energy_needed) + " Pwh"
                    text_size: self.size
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 286
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Net Solar Energy: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_net_energy[1]) + " Mwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 259
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Solar Energy Used: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_energy_used[1]) + " Gwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 230
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Net Wind Energy: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_net_energy[0]) + " Mwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 203
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Wind Energy Used: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_energy_used[0]) + " Gwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 174
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Net Hydroelectric Energy: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_net_energy[2]) + " Mwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 147
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Hydroelectric Energy Used: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_energy_used[2]) + " Gwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c6)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 118
                FloatLayout:
                    size_hint: None, None
                    size: 240, 25
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Nonrenewable Energy Used: "
                    text_size: self.size
                    font_name: "GothamM"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 10
                    height: 25
                    width: 200
                    pos: 5, 7
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_energy_used[3]) + " Gwh"
                    text_size: self.size
                    color: utils.get_color_from_hex(root.c5)
                    font_name: "Segoe"
                    font_size: 10
                    height: 25
                    width: 230
                    pos: 0, 7
            RelativeLayout:
                size_hint: None, None
                pos: 5, 3
                FloatLayout:
                    size_hint: None, None
                    size: 240, 110
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: str(root.sum_energy_saved)
                    text_size: self.size
                    font_name: "SegoeL"
                    font_size: 36
                    height: 75
                    width: 150
                    pos: 0, 40
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: "Gwh"
                    text_size: self.size
                    font_name: "SegoeL"
                    font_size: 20
                    height: 75
                    width: 80
                    pos: 151, 45
                Label:
                    size_hint: None, None
                    halign: "center"
                    valign: "bottom"
                    text: "Total Energy Saved"
                    text_size: self.size
                    font_name: "GothamB"
                    color: utils.get_color_from_hex(root.c4)
                    font_size: 9
                    height: 15
                    width: 240
                    pos: 0, 30
        #Day Report
        RelativeLayout:
            size_hint: None, None
            pos: 250, 250
            FloatLayout:
                size_hint: None, None
                size: 550, 370
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c2)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            #Time Widget
            RelativeLayout:
                size_hint: None, None
                size: 550, 75
                pos: 0, 300
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c2)
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    size_hint: None, None
                    halign: "right"
                    valign: "bottom"
                    text: root.time
                    text_size: self.size
                    font_name: "GothamM"
                    font_size: 32
                    height: 75
                    width: 130
                    pos: 0, 10
                FloatLayout:
                    size_hint: None, None
                    size: 1, 50
                    pos: 145, 10
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c4)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "left"
                    valign: "bottom"
                    text: root.date_str
                    text_size: self.size
                    font_name: "GothamBook"
                    font_size: 18
                    height: 75
                    width: 200
                    pos: 160, 15
                HoverButton:
                    id: clock
                    size_hint: None, None
                    size: 30, 30
                    pos: 510, 30
                    background_normal: 'images/ClockHover.png' if self.hovered else 'images/ClockDefault.png'
                    background_down: 'images/ClockDefault.png'
                    on_release: root.show_time_picker()
                HoverButton:
                    id: calendar
                    size_hint: None, None
                    size: 30, 30
                    pos: 475, 30
                    background_normal: 'images/CalendarHover.png' if self.hovered else 'images/CalendarDefault.png'
                    background_down: 'images/CalendarDefault.png'
                    on_release: root.show_example_date_picker()
            #Conditions Widget
            RelativeLayout:
                size_hint: None, None
                pos: 0, 0
                FloatLayout:
                    size_hint: None, None
                    size: 250, 300
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c2)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                FloatLayout:
                    size_hint: None, None
                    size: 250, 25
                    pos: 0, 275
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c3)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "center"
                    valign: "bottom"
                    text: "Weather Conditions"
                    text_size: self.size
                    font_name: "Avenir3"
                    font_size: 13
                    height: 25
                    width: 250
                    pos: 0, 280
                Label:
                    size_hint: None, None
                    halign: "center"
                    valign: "bottom"
                    text: "Austin, TX"
                    text_size: self.size
                    font_name: "GothamB"
                    font_size: 12
                    height: 75
                    width: 250
                    pos: 0, 250
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 169
                    FloatLayout:
                        size_hint: None, None
                        size: 240, 78
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "bottom"
                        text: str(root.temp) + "Â°"
                        text_size: self.size
                        font_name: "SegoeL"
                        font_size: 36
                        height: 75
                        width: 150
                        pos: 0, 20
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "F"
                        text_size: self.size
                        font_name: "GothamBook"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 14
                        height: 75
                        width: 240
                        pos: 25, 27
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Temperature"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 240
                        pos: 0, 10
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 86
                    FloatLayout:
                        size_hint: None, None
                        size: 240, 80
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: root.cloud_cover
                        text_size: self.size
                        font_name: "SegoeL"
                        font_size: 28
                        height: 75
                        width: 240
                        pos: 0, 25
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Cloud Cover"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 240
                        pos: 0, 10
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 3
                    FloatLayout:
                        size_hint: None, None
                        size: 240, 80
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "bottom"
                        text: str(root.wind_speed)
                        text_size: self.size
                        font_name: "SegoeL"
                        font_size: 36
                        height: 75
                        width: 119
                        pos: 0, 20
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "bottom"
                        text: "mph"
                        text_size: self.size
                        font_name: "SegoeL"
                        font_size: 20
                        height: 75
                        width: 80
                        pos: 121, 25
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Wind Speed"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 240
                        pos: 0, 10
                
            #Energy Report Widget
            RelativeLayout:
                size_hint: None, None
                pos: 250, 0
                FloatLayout:
                    size_hint: None, None
                    size: 300, 300
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c2)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                FloatLayout:
                    size_hint: None, None
                    size: 300, 25
                    pos: 0, 275
                    canvas.before:
                        Color: 
                            rgb: utils.get_color_from_hex(root.c3)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                Label:
                    size_hint: None, None
                    halign: "center"
                    valign: "bottom"
                    text: "Energy Report"
                    text_size: self.size
                    font_name: "Avenir3"
                    font_size: 13
                    height: 25
                    width: 300
                    pos: 0, 280
                #Total Widget
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 207
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: "Total Gain:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 10
                        height: 15
                        width: 100
                        pos: 15, 35
                    FloatLayout:
                        size_hint: None, None
                        size: 150, 3
                        pos: 85, 41
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 150 * root.total_gain / 100, 3
                        pos: 85, 41
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c6)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.total_gain) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 10
                        height: 15
                        width: 60
                        pos: 250, 35
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: "Total Used:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 10
                        height: 15
                        width: 100
                        pos: 15, 12
                    FloatLayout:
                        size_hint: None, None
                        size: 150, 3
                        pos: 85, 18
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 150 * root.total_loss / 100, 3
                        pos: 85, 18
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c5)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.total_loss) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 10
                        height: 15
                        width: 60
                        pos: 250, 12
                #Sun Widget
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 139
                    FloatLayout:
                        size_hint: None, None
                        size: 290, 65
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Image:
                        size_hint: None, None
                        source: "images/SunIcon.png"
                        size: 30, 30
                        pos: 15, 25
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Solar"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 30
                        pos: 15, 10
                    FloatLayout:
                        size_hint: None, None
                        size: 1, 45
                        pos: 60, 10
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.sc)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Capacity:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 42
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_levels[1] / 100, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.sc)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_levels[1]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 42
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Gained:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 24
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_gain[1] / 100, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c6)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_gain[1]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 24
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Used:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 6
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_loss[1] / 100, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c5)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_loss[1]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 6
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 71
                    FloatLayout:
                        size_hint: None, None
                        size: 290, 65
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Image:
                        size_hint: None, None
                        source: "images/WindIcon.png"
                        size: 30, 30
                        pos: 15, 25
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Wind"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 30
                        pos: 15, 10
                    FloatLayout:
                        size_hint: None, None
                        size: 1, 45
                        pos: 60, 10
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.wc)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Capacity:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 42
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_levels[0] / 100, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.wc)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_levels[0]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 42
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Gained:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 24
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_gain[0] / 100, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c6)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_gain[0]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 24
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Used:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 6
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_loss[0] / 100, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c5)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_loss[0]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 6
                RelativeLayout:
                    size_hint: None, None
                    pos: 5, 3
                    FloatLayout:
                        size_hint: None, None
                        size: 290, 65
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c1)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Image:
                        size_hint: None, None
                        source: "images/WaveIcon.png"
                        size: 30, 30
                        pos: 15, 25
                    Label:
                        size_hint: None, None
                        halign: "center"
                        valign: "bottom"
                        text: "Hydro"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 30
                        pos: 15, 15
                    FloatLayout:
                        size_hint: None, None
                        size: 1, 45
                        pos: 60, 10
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.hc)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Capacity:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 42
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_levels[2] / 100, 2
                        pos: 125, 49
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.hc)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_levels[2]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 42
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Gained:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 24
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_gain[2] / 100, 2
                        pos: 125, 31
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c6)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_gain[2]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 24
                    Label:
                        size_hint: None, None
                        halign: "right"
                        valign: "top"
                        text: "Used:"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 55, 6
                    FloatLayout:
                        size_hint: None, None
                        size: 110, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                    FloatLayout:
                        size_hint: None, None
                        size: 110 * root.energy_loss[2] / 100, 2
                        pos: 125, 13
                        canvas.before:
                            Color: 
                                rgb: utils.get_color_from_hex(root.c5)
                            Rectangle:
                                pos: self.pos
                                #change size on capacity
                                size: self.size
                    Label:
                        size_hint: None, None
                        halign: "left"
                        valign: "top"
                        text: str(root.energy_loss[2]) + "%"
                        text_size: self.size
                        font_name: "GothamB"
                        color: utils.get_color_from_hex(root.c4)
                        font_size: 9
                        height: 15
                        width: 60
                        pos: 250, 6
            FloatLayout:
                size_hint: None, None
                size: 1, 300
                pos: 250, 0
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c1)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            FloatLayout:
                size_hint: None, None
                size: 1, 25
                pos: 250, 275
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c2)
                    Rectangle:
                        pos: self.pos
                        size: self.size
        RelativeLayout:
            size: 800, 30
            pos: 0, 620
            dropdown: dropdown.__self__
            size_hint_y: None
            FloatLayout:
                size_hint: None, None
                size: 30, 30
                pos: 0, 0    
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c7)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Image:
                size_hint: None, None
                source: "images/Logo.png"
                size: 20, 20
                allow_stretch: True
                pos: 5, 5
            FloatLayout:
                size_hint: None, None
                size: 650, 30
                pos: 130, 0
                canvas.before:
                    Color: 
                        rgb: utils.get_color_from_hex(root.c7)
                    Rectangle:
                        pos: self.pos
                        size: self.size
            HoverButton:
                id: file
                text: "File"
                size_hint_x: None
                font_name: "GothamB"
                font_size: 12
                width: 100
                pos:30, 0
                background_normal: 'images/LightGrey.jpg' if self.hovered else 'images/DefaultGrey.jpg'
                background_down: 'images/LightGrey.jpg'
                on_release: dropdown.open(self)
                on_parent: dropdown.dismiss()
            DropDown:
                id: dropdown
                on_select: file.text = '{}'.format(args[1])
                auto_width: False
                width: 150
                HoverButton:
                    font_name: "GothamB"
                    font_size: 12
                    text: 'New Plan'
                    size_hint_y: None
                    size_hint_x: None
                    height: 30
                    width: 150
                    background_normal: 'images/LightBlue.png' if self.hovered else 'images/DarkGrey.png'
                    background_down: 'images/LightGrey.jpg'
                    on_release:
                        root.new_plan()
                        dropdown.dismiss()
                HoverButton:
                    font_name: "GothamB"
                    font_size: 12
                    text: 'Open Plan'
                    size_hint_y: None
                    size_hint_x: None
                    height: 30
                    width: 150
                    background_normal: 'images/LightBlue.png' if self.hovered else 'images/DarkGrey.png'
                    background_down: 'images/LightGrey.jpg'
                    on_release:
                        root.open_plan()
                        dropdown.dismiss()
                HoverButton:
                    font_name: "GothamB"
                    font_size: 12
                    text: 'Save Plan'
                    size_hint_y: None
                    size_hint_x: None
                    height: 30
                    width: 150
                    background_normal: 'images/LightBlue.png' if self.hovered else 'images/DarkGrey.png'
                    background_down: 'images/LightGrey.jpg'
                    on_release:
                        root.save_plan()
                        dropdown.dismiss()
            HoverButton:
                text: "x"
                font_name: "Gotham"
                font_size: 16
                size_hint_x: None
                width: 50
                pos: 750, 0 
                background_normal: 'images/Red.jpg' if self.hovered else 'images/DefaultGrey.jpg'
                background_down: 'images/DarkRed.png'
                on_release: app.stop()
        FloatLayout:
            size_hint: None, None
            size: 1, 350
            pos: 250, 250
            canvas.before:
                Color: 
                    rgb: utils.get_color_from_hex(root.c1)
                Rectangle:
                    pos: self.pos
                    size: self.size
        
                
                
        
